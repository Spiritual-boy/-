<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>合同管理系统</title>
    <meta name="description" content="这是一个 index 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="apple-touch-icon-precomposed" href="static/images/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="Amaze UI" />
    <link rel="stylesheet" href="static/css/amazeui.min.css" />
    <link rel="stylesheet" href="static/css/admin.css">
    <link rel="stylesheet" href="static/css/app.css">
</head>

<body data-type="generalComponents">


    <header class="am-topbar am-topbar-inverse admin-header">
        <div class="am-topbar-brand">
           
        </div>
        <div class="am-icon-list tpl-header-nav-hover-ico am-fl am-margin-right">

        </div>

        <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#topbar-collapse'}"><span class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span></button>

        <div class="am-collapse am-topbar-collapse" id="topbar-collapse">

            <ul class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list tpl-header-list">
                <li class="am-dropdown" data-am-dropdown data-am-dropdown-toggle>
                  

                <li class="am-dropdown" data-am-dropdown data-am-dropdown-toggle>
                    <a class="am-dropdown-toggle tpl-header-list-link" href="javascript:;">
                        <span class="tpl-header-list-user-nick">{{yonghu}}</span>
                    </a>
                    <script type="text/javascript">
    function f1(){
      window.location.href="/retry";
    }

</script>
                    <ul class="am-dropdown-content">
                        <li><a onclick="f1()"><span class="am-icon-power-off"></span> 退出</a></li>
                    </ul>
                </li>
                <li><a onclick="f1()" class="tpl-header-list-link"><span class="am-icon-sign-out tpl-header-list-ico-out-size"></span></a></li>
            </ul>
        </div>
    </header>







    <div class="tpl-page-container tpl-page-header-fixed">


        
        <div class="tpl-left-nav tpl-left-nav-hover">
            <div class="tpl-left-nav-title">
                合同管理系统
          </div>
            <div class="tpl-left-nav-list">
                <ul class="tpl-left-nav-menu">
                    <li class="tpl-left-nav-item">
                        <a href="/index1" class="nav-link">
                            <span>首页</span>
                        </a>
                    </li>
                    
 					<li class="tpl-left-nav-item">
                        <a href="/HTlist" class="nav-link">
                            <span>家庭组</span>
                        </a>
                    </li>
							
				
                    <li class="tpl-left-nav-item">
                        <a href="/KHlist" class="nav-link">
                            <span>紧急联系人</span>
                        </a>
                    </li>
					
					<li class="tpl-left-nav-item">
                        <a href="/YHlist" class="nav-link">
                            <span>个人信息</span>
                        </a>
                    </li>
					<li class="tpl-left-nav-item">
                        <a href="/YHlist" class="nav-link active">
                            <span>新闻</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <script>
        /**
         * 分页函数
         * pno--页数
         * psize--每页显示记录数
         * 分页部分是从真实数据行开始，因而存在加减某个常数，以确定真正的记录数
         * 纯js分页实质是数据行全部加载，通过是否显示属性完成分页功能
         **/
        function goPage(pno, psize) {
            var itable = document.getElementById("idData");
            var num = itable.rows.length;//表格所有行数(所有记录数)
            console.log(num);
            var totalPage = 0;//总页数
            var pageSize = psize;//每页显示行数
            //总共分几页
            if (num / pageSize > parseInt(num / pageSize)) {
                totalPage = parseInt(num / pageSize) + 1;
            } else {
                totalPage = parseInt(num / pageSize);
            }
            var currentPage = pno;//当前页数
            var startRow = (currentPage - 1) * pageSize + 1;//开始显示的行 31
            var endRow = currentPage * pageSize;//结束显示的行  40
            endRow = (endRow > num) ? num : endRow;  //40
            console.log(endRow);
            //遍历显示数据实现分页
            for (var i = 1; i < (num + 1); i++) {
                var irow = itable.rows[i - 1];
                if (i >= startRow && i <= endRow) {
                    irow.style.display = "block";
                } else {
                    irow.style.display = "none";
                }
            }
            var tempStr = '';
            if (currentPage > 1) {
                tempStr += "<a href=\"#\" onClick=\"goPage(" + (1) + "," + psize + ")\">首页</a>";
                tempStr += "<a href=\"#\" onClick=\"goPage(" + (currentPage - 1) + "," + psize + ")\"><上一页</a>"
            } else {
                tempStr += "首页";
                tempStr += "<上一页";
            }
            if (currentPage < totalPage) {
                tempStr += "<a href=\"#\" onClick=\"goPage(" + (currentPage + 1) + "," + psize + ")\">下一页></a>";
                tempStr += "<a href=\"#\" onClick=\"goPage(" + (totalPage) + "," + psize + ")\">尾页</a>";
            } else {
                tempStr += "下一页>";
                tempStr += "尾页";
            }
            document.getElementById("barcon").innerHTML = tempStr;
        }
    </script>

        <div class="tpl-content-wrapper">
            <div class="tpl-content-page-title">
               晚年无忧
            </div>
            <ol class="am-breadcrumb">
                <li><a href="#">新闻</a></li>
               
            </ol>
          <div class="tpl-portlet-components">
                <div class="portlet-title">
                    <div class="caption font-green bold">
                        <span class="am-icon-code">新闻列表</span>
                    </div>


                </div>
                <div class="tpl-block">
                    <div class="am-g">
                        <div class="am-u-sm-12 am-u-md-6">
                            <div class="am-btn-toolbar">
                                <div class="am-btn-group am-btn-group-xs">
                                </div>
                            </div>
                        </div>
                       
                        <div class="am-u-sm-12 am-u-md-3">
                            <div class="am-input-group am-input-group-sm">
                               <input type="text" class="am-form-field" placeholder="要查询的关键字" id="key" onkeydown="onSearch(this)" >

                                   <script type="text/javascript">
                                    function onSearch(obj){//js函数开始
                                        setTimeout(function(){//因为是即时查询，需要用setTimeout进行延迟，让值写入到input内，再读取
                                            var storeId = document.getElementById('idData');//获取table的id标识
                                            var rowsLength = storeId.rows.length;//表格总共有多少行
                                            var key = obj.value;//获取输入框的值
                                            var searchCol = 2;//要搜索的哪一列，这里是第一列，从0开始数起
                                            for(var i=1;i<rowsLength;i++){//按表的行数进行循环，本例第一行是标题，所以i=1，从第二行开始筛选（从0数起）
                                                var searchText = storeId.rows[i].cells[searchCol].innerHTML;//取得table行，列的值
                                                if(searchText.match(key)){//用match函数进行筛选，如果input的值，即变量 key的值为空，返回的是ture，
                                                storeId.rows[i].style.display='';//显示行操作，
                                                }
                                                else{
                                                        storeId.rows[i].style.display='none';//隐藏行操作
                                                }
                                            }
                                        },200);//200为延时时间
                                    }
                                    </script>
                                <span class="am-input-group-btn">
            <button class="am-btn  am-btn-default am-btn-success tpl-am-btn-success am-icon-search" type="button" 
					></button>
          </span>
                            </div>
                        </div>
                    </div>
                    <div class="am-g">
                        <div class="am-u-sm-12">
                                <body onload="goPage(1,10)">
                                <table class="am-table am-table-striped am-table-hover table-main" id="idData">
                                    <thead>
                                        <tr>
                                            <th class="table-check"><input type="checkbox" class="tpl-table-fz-check"></th>
                                            <th class="table-id">ID</th>
                                            <th class="table-title">新闻名称</th>
                                            <th class="table-type">链接</th>
                                        </tr>
                                    </thead>


                                            {%for one in var%}

                                            <tr>
                                            <div class="row">
                                              <td><input type="checkbox"></td>
                                              <td>1</td>
                                              <td><a onclick="j1(this.id)" id="{{one.usename}}">{{one.title}}</a></td>
                                              <td><a href="{{one.link}}">{{one.link}}</a></td>

                                            </div>
                                            </tr>

                                            {% endfor %}


                                </table>
                                <table width="60%">
             <tr>
            <td> <div class="am-btn-group am-btn-group-xs">
                <div id="barcon" name="barcon"></div>
            </div>
            </td>
        </tr>
          </table>
                                </body>

                                <hr>

                            </form>
                        </div>

                    </div>
                </div>
                <div class="tpl-alert"></div>
            </div>

        </div>
    </div>
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/amazeui.min.js"></script>
    <script src="static/js/app.js"></script>
</body>

</html>
